<!-- REFERENCIA AL FORMULARIO DE CONSULTA, QUE CONTIENE EL FORMULARIO DE ALTA DESHABILITADO PARA LA CARGA DE DATOS -->
<app-consulta-jobs></app-consulta-jobs>
<!-- <app-consulta-jobs class="modal fade" id="consultaJobsModal" tabindex="-1" role="dialog"></app-consulta-jobs> -->

<!--					****************		FORMULARIO DE BUSQUEDA PARA LAS CONSULTAS		**************** 					-->
<!--	El modelo de formulario usado para esta parte de la página es el Template-driven Form, es decir, los controles y
		validaciones se realizan desde el propio HTML a traves de los controles de Angular ngForm(Formulario) y ngModel(campos)		-->
<br>
<div class="row">
	<div class="col-xs-1 pull-right mini-circular">
			<img src="../assets/img/return_icon.png" title="Men&uacute; operaciones" class="mini-img-circular" routerLink="/menu-operacion">
	</div>
	<div class="col-xs-1 pull-right mini-circular">
			<img src="../assets/img/home_icon.png" title="Home" class="mini-img-circular" routerLink="/">
	</div>
</div>
<div id="areaBusca">
	<br>
	<form id="buscaJobsForm" name="buscaJobsForm" (ngSubmit)="onSubmit()" #buscaJobsForm="ngForm">
		<fieldset id="fieldBusca">
			<legend class="text-muted"> Rellene los campos de la consulta </legend>
			<div class="row form-group form-group-sm">
				<!-- NOMBRE -->
				<div class="col-sm-3">
					<label for="busca_des_refdocjb">Nombre</label> 
					<input type="text" class="form-control" id="busca_des_refdocjb"
						[(ngModel)]="jobs.des_refdocjb" name="busca_des_refdocjb" #busca_des_refdocjb="ngModel">
				</div>
				
				<!-- JOBNAME -->
				<div class="col-sm-3">
					<label for="busca_des_nombrjob">Jobname</label> 
					<input type="text" class="form-control" id="busca_des_nombrjob"
						[(ngModel)]="jobs.des_nombrjob" name="busca_des_nombrjob" #busca_des_nombrjob="ngModel">
				</div>
				
				<!-- GRUPO DE SOPORTE -->
				<div class="col-sm-3">
					<label for="busca_des_gsoporte">Grupo de Soporte</label>
					<select class="form-control" id="busca_des_gsoporte"
						[(ngModel)]="jobs.des_gsoporte" name="busca_des_gsoporte" #busca_des_gsoporte="ngModel">
						<option *ngFor="let grupo of grupo_soporte" [value]="grupo">{{grupo}}</option>
					</select>
				</div>
				
				<!-- APLICACION UUAA -->
				<div class="col-sm-3">
					<label for="cod_aplicaci">Cod.Aplicaci&oacute;n - UUAA</label> 
					<input type="text" class="form-control" id="cod_aplicaci"
						[(ngModel)]="jobs?.id.cod_aplicaci" name="cod_aplicaci" #cod_aplicaci="ngModel">
				</div>
			</div>
			<div *ngIf="!masCampos">
				<a (click)="toogleCampos()" style="cursor: pointer;"> 
					Mostrar mas campos de b&uacute;squeda + 
				</a>
			</div>
			<div *ngIf="masCampos">
				<div class="row form-group form-group-sm">
					<!-- LIBRERIA DE ORIGEN -->
					<div class="col-sm-3">
						<label for="busca_des_libreori">Libreria de origen</label>
						<input type="text" class="form-control" id="busca_des_libreori"
							[(ngModel)]="jobs.des_libreori" name="busca_des_libreori" #busca_des_libreori="ngModel">
					</div>
					
					<!-- ESTRUCTURA -->
					<div class="col-sm-3">
						<label for="busca_des_estrupl">Estructura</label>
						<input type="text" class="form-control" id="busca_des_estrupl"
							[(ngModel)]="jobs.des_estrupl" name="busca_des_estrupl" #busca_des_estrupl="ngModel">
					</div>
					
					<!-- PERIODICIDAD -->
					<div class="col-sm-3">
						<label for="busca_des_periojob">Reglas de Planificaci&oacute;n/Periodicidad</label>
						<input type="text" class="form-control" id="busca_des_periojob"
							[(ngModel)]="jobs.des_periojob" name="busca_des_periojob" #busca_des_periojob="ngModel">
					</div>
					
					<!-- MAQUINA DE EJECUCION -->
					<div class="col-sm-3">
						<label for="busca_des_maqeje">M&aacute;quina de ejecuci&oacute;n</label> 
						<input type="text" class="form-control" id="busca_des_maqeje"
							[(ngModel)]="jobs.des_maqeje" name="busca_des_maqeje" #busca_des_maqeje="ngModel">
					</div>				
				</div>
				<div class="row form-group form-group-sm">
					<!-- MAQUINA DE ORIGEN -->
					<div class="col-sm-3">
						<label for="busca_des_maqori">Maquina origen</label> 
						<input type="text" class="form-control" id="busca_des_maqori"
							[(ngModel)]="jobs.des_maqori" name="busca_des_maqori" #busca_des_maqori="ngModel">
					</div>
				</div>
				<a (click)="toogleCampos()" style="cursor: pointer;">
					Mostrar menos campos de b&uacute;squeda - 
				</a>
			</div>
			<br>
			<!-- BOTONERA DEL FORMULARIO -->
			<div class="row form-group form-group-sm">
				<div class="col-sm-2">
					<button type="button" class="pull-left btn btn-primary" (click)="limpiar()">Limpiar</button>
				</div>
				<div class="col-sm-offset-8 col-sm-2">
<!-- 					<button id="frmBuscaJobBtnBusca" type="submit" class="pull-right btn btn-success" data-toggle="modal" data-target="#consultaJobsModal"  -->
<!-- 						[disabled]="!buscaJobsForm.form.dirty">Buscar</button> -->
					<button id="frmBuscaJobBtnBusca" type="submit" class="pull-right btn btn-success" [disabled]="!buscaJobsForm.form.dirty">Buscar</button>
				</div>
			</div>
		</fieldset>
	</form>
	<br>
	<div class="example-container mat-elevation-z8">
		<md-table #table [dataSource]="jobs_res"> 
			<!--- Note that these columns can be defined in any order.
	   The actual rendered columns are set as a property on the row definition" -->
	
			<!-- Position Column --> <ng-container mdColumnDef="position">
			<md-header-cell *mdHeaderCellDef> No. </md-header-cell> <md-cell
				*mdCellDef="let element"> {{element.des_gsoporte}} </md-cell> </ng-container>
	
			<!-- Name Column --> <ng-container mdColumnDef="name">
			<md-header-cell *mdHeaderCellDef> Name </md-header-cell> <md-cell
				*mdCellDef="let element"> {{element.des_nombrjob}} </md-cell> </ng-container>
	
			<!-- Weight Column --> <ng-container mdColumnDef="weight">
			<md-header-cell *mdHeaderCellDef> Weight </md-header-cell> <md-cell
				*mdCellDef="let element"> {{element.xti_critijob}} </md-cell> </ng-container>
	
			<!-- Color Column --> 
			<ng-container mdColumnDef="symbol">
			<md-header-cell *mdHeaderCellDef> Symbol </md-header-cell> <md-cell
				*mdCellDef="let element"> {{element.symbol}} </md-cell> 
			</ng-container> 
			<md-header-row *mdHeaderRowDef="displayedColumns"></md-header-row> <md-row *mdRowDef="let row; columns: displayedColumns;"></md-row>
		</md-table>
	</div>
	<!-- TABLA DE RESULTADOS DEL PLUGIN DATABLES -->
<!-- 	<table *ngIf="jobs_res" class="table table-striped" [mfData]="jobs_res" #mf="mfDataTable" [mfRowsOnPage]="rowsOnPage"> -->
<!-- 		<thead> -->
<!-- 			<tr> -->
<!-- 				<th style="width: 20%"><mfDefaultSorter by="cod_aplicaci">cod_aplicaci</mfDefaultSorter> -->
<!-- 				</th> -->
<!-- 				<th style="width: 50%"><mfDefaultSorter by="des_gsoporte">des_gsoporte</mfDefaultSorter> -->
<!-- 				</th> -->
<!-- 				<th style="width: 10%"><mfDefaultSorter by="des_nombrjob">des_nombrjob</mfDefaultSorter> -->
<!-- 				</th> -->
<!-- 				<th style="width: 20%"><mfDefaultSorter by="xti_critijob">xti_critijob</mfDefaultSorter> -->
<!-- 				</th> -->
<!-- 			</tr> -->
<!-- 		</thead> -->
<!-- 		<tbody> -->
<!-- 			<tr *ngFor="let data of jobs_res"> -->
<!-- 				<td>{{data.id.cod_aplicaci}}</td> -->
<!-- 				<td>{{data.des_gsoporte}}</td> -->
<!-- 				<td>{{data.des_nombrjob}}</td> -->
<!-- 				<td>{{data.xti_critijob | uppercase}}</td> -->
<!-- 			</tr> -->
<!-- 		</tbody> -->
<!-- 		<tfoot> -->
<!-- 			<tr> -->
<!-- 				<td colspan="4"><mfBootstrapPaginator [rowsOnPageSet]="[5,10,25]"></mfBootstrapPaginator></td> -->
<!-- 			</tr> -->
<!-- 		</tfoot> -->
<!-- 	</table> -->
</div>
<br>
<div class="row">
	<div class="col-xs-1 pull-right mini-circular">
			<img src="../assets/img/return_icon.png" title="Men&uacute; operaciones" class="mini-img-circular" routerLink="/menu-operacion">
	</div>
	<div class="col-xs-1 pull-right mini-circular">
			<img src="../assets/img/home_icon.png" title="Home" class="mini-img-circular" routerLink="/">
	</div>
</div>
<br>